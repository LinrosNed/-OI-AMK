{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/0960a95ef5.js" crossorigin="anonymous"></script>


    <link rel="stylesheet" href="{% static 'manual/css/style.css' %}">
</head>
<body>
    <nav>
        <div class="side-scroll">
            <div class="nav-logo">
                <div class="home">
                    <img src="{% static 'manual/img/logo.png' %}">
                    <h2>IO Manual</h2>
                </div>
                
            </div>
            <div class="menu-vertival">
                <p class="caption">
                    Элементы документации
                </p>
                <a href="{% url 'manual:note' %}" class="">Обратить внимание</a>
                <a href="{% url 'manual:text_block' %}" class="">Блок с текстом</a>
                <ul class="toctree-l">
                    <li class="cataloge">
                        <a href="" class="reference"> <button></button>Списки</a>
                    </li>
                    <ul>
                        <li class="on"><a class="" href="{% url 'manual:list_point' %}">С точками</a></li>
                        <li class="on"><a class="" href="{% url 'manual:list_num' %}">Нумерованый</a></li>
                    </ul>
                </ul>
                <a href="{% url 'manual:picture' %}" class="">Картинка</a>

                <ul class="toctree-l">
                    <li class="cataloge">
                        <a href="" class="reference"> <button></button>Слайдеры</a>
                    </li>
                    <ul>
                        <li class="on"><a href="{% url 'manual:slider' %}" class="">Без подписей</a></li>
                        <li class="on"><a class="" href="{% url 'manual:slider_text' %}">С подписбю</a></li>
                    </ul>
                </ul>
                <p class="caption">
                    Seconde
                </p>
                <!-- <a href="" class="">other</a>
                <a href="" class="">other</a> -->
                

            </div>
        </div>
    </nav>
    <section class="main-content">
        <div class="rst-content">
            <div class="content">
                {% block content %}
                {% endblock %}
          </div>
        </div>
    </section>
    <script>
        let url = window.location.pathname;
        $('a.reference').click(function(e){
            e.preventDefault()
        })

        // открытие подкатегорий
        $('.toctree-l>li').click(function(){
            if ($(this).hasClass('current')){
                $('.toctree-l>li').removeClass('current')
                $(this).removeClass('current')
            } else{
                $('.toctree-l>li').removeClass('current')
                $(this).addClass('current')
            }
            
        })
        // ссылка на главную страницу
        $('.home').click(function(){
            url = '{% url 'manual:index' %}'
            window.location.href = url
        })


        openCurMenu()
        // gjrfpfnm ds,hfyysq geyrn vty.
        function openCurMenu(){
            let a = $(`a[href="${url}"]`);

            a.addClass('active')
            parent = a.parent()
            console.log(parent,parent.hasClass('on'))
            if (parent.hasClass('on')){
                console.log(123)
                let ul = a.parentsUntil('.menu-vertival')
                // console.log(ul)
                // console.log(ul.find('li.cataloge').addClass('current'))
                ul.find('li.cataloge').addClass('current')

            }
        }
        
    </script>
</body>
</html>